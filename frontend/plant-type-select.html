<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Select Crop Type | Plant Care</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="style.css">
  <style>
    .plant-type-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 50%, #ffffff 100%);
    }
    
    .plant-type-card {
      background: white;
      border-radius: 20px;
      padding: 40px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.1);
      max-width: 800px;
      width: 100%;
      text-align: center;
    }
    
    .plant-type-title {
      font-size: 32px;
      color: #2e7d32;
      margin-bottom: 10px;
    }
    
    .plant-type-subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 16px;
    }
    
    .crops-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 15px;
      margin-top: 30px;
    }
    
    .crop-option {
      background: #f9fff9;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      padding: 20px 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .crop-option:hover {
      border-color: #4caf50;
      background: #f1f8e9;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
    }
    
    .crop-option.selected {
      border-color: #2e7d32;
      background: #e8f5e9;
      box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
      position: relative;
    }
    
    .crop-option.selected::after {
      content: "âœ“";
      position: absolute;
      top: 10px;
      right: 10px;
      background: #2e7d32;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      font-weight: bold;
    }
    
    .crop-icon {
      font-size: 32px;
      margin-bottom: 10px;
    }
    
    .crop-name {
      font-size: 16px;
      font-weight: 600;
      color: #2e7d32;
    }
    
    .crop-type {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }
    
    .continue-btn {
      margin-top: 30px;
      padding: 15px 40px;
      background: #2e7d32;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .continue-btn:hover {
      background: #256628;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
    }
    
    .continue-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }
  </style>
</head>
<body>
  <div class="plant-type-container">
    <div class="plant-type-card">
      <h1 class="plant-type-title" id="cropTitle">ðŸŒ¾ Select Your Crop Types</h1>
      <p class="plant-type-subtitle" id="cropSubtitle">Choose one or more crops you want to monitor (Karnataka-grown crops)</p>
      <p class="plant-type-hint" id="cropHint" style="color: #666; font-size: 14px; margin-top: 10px;">You can select multiple crops</p>
      
      <div class="crops-grid" id="cropsGrid"></div>
      
      <button class="continue-btn" id="continueBtn" onclick="continueToHome()" disabled>
        Continue (0 selected)
      </button>
    </div>
  </div>

  <script src="translations.js"></script>
  <script>
    // Check if user is logged in, if not redirect to login
    if (!localStorage.getItem("loggedIn")) {
      window.location.href = "index.html";
    }
    
    // Check if language is selected, if not redirect
    if (!localStorage.getItem('selectedLanguage')) {
      window.location.href = 'language-select.html';
    }

    // Make translations available globally
    if (typeof translations !== 'undefined') {
      window.translations = translations;
    } else {
      console.warn('Translations not loaded, using English fallback');
      window.translations = { en: {} };
    }
    
    // Karnataka-grown crops with translations
    const crops = [
      { name: 'Rice', icon: 'ðŸŒ¾', type: 'Cereal', translations: { en: 'Rice', hi: 'à¤šà¤¾à¤µà¤²', kn: 'à²…à²•à³à²•à²¿', te: 'à°µà°°à°¿', ta: 'à®…à®°à®¿à®šà®¿', mr: 'à¤¤à¤¾à¤‚à¤¦à¥‚à¤³', gu: 'àªšà«‹àª–àª¾', bn: 'à¦šà¦¾à¦²', ml: 'à´…à´°à´¿', or: 'à¬šà¬¾à¬‰à¬³', pa: 'à¨šà©Œà¨²' } },
      { name: 'Ragi (Finger Millet)', icon: 'ðŸŒ¾', type: 'Cereal', translations: { en: 'Ragi (Finger Millet)', hi: 'à¤°à¤¾à¤—à¥€', kn: 'à²°à²¾à²—à²¿', te: 'à°°à°¾à°—à°¿', ta: 'à®•à¯‡à®´à¯à®µà®°à®•à¯', mr: 'à¤¨à¤¾à¤šà¤£à¥€', gu: 'àª¨àª¾àªšàª£à«€', bn: 'à¦°à¦¾à¦—à¦¿', ml: 'à´°à´¾à´—à´¿', or: 'à¬°à¬¾à¬—à¬¿', pa: 'à¨°à¨¾à¨—à©€' } },
      { name: 'Jowar (Sorghum)', icon: 'ðŸŒ¾', type: 'Cereal', translations: { en: 'Jowar (Sorghum)', hi: 'à¤œà¥à¤µà¤¾à¤°', kn: 'à²œà³‹à²³', te: 'à°œà±Šà°¨à±à°¨', ta: 'à®šà¯‹à®³à®®à¯', mr: 'à¤œà¥à¤µà¤¾à¤°à¥€', gu: 'àªœà«àªµàª¾àª°', bn: 'à¦œà§‹à¦¯à¦¼à¦¾à¦°', ml: 'à´šàµ‹à´³à´‚', or: 'à¬œà­‹à¬†à¬°', pa: 'à¨œà©Œà¨‚' } },
      { name: 'Maize', icon: 'ðŸŒ½', type: 'Cereal', translations: { en: 'Maize', hi: 'à¤®à¤•à¥à¤•à¤¾', kn: 'à²®à³†à²•à³à²•à³† à²œà³‹à²³', te: 'à°®à±Šà°•à±à°•à°œà±Šà°¨à±à°¨', ta: 'à®®à®•à¯à®•à®¾à®šà¯à®šà¯‹à®³à®®à¯', mr: 'à¤®à¤•à¤¾', gu: 'àª®àª•àª¾àªˆ', bn: 'à¦­à§à¦Ÿà§à¦Ÿà¦¾', ml: 'à´šàµ‹à´³à´‚', or: 'à¬®à¬•à¬¾', pa: 'à¨®à©±à¨•à©€' } },
      { name: 'Tomato', icon: 'ðŸ…', type: 'Vegetable', translations: { en: 'Tomato', hi: 'à¤Ÿà¤®à¤¾à¤Ÿà¤°', kn: 'à²Ÿà³Šà²®à²¾à²Ÿà³Š', te: 'à°Ÿà°®à°¾à°Ÿà±‹', ta: 'à®¤à®•à¯à®•à®¾à®³à®¿', mr: 'à¤Ÿà¥‹à¤®à¥…à¤Ÿà¥‹', gu: 'àªŸàª®à«‡àªŸàª¾', bn: 'à¦Ÿà¦®à§‡à¦Ÿà§‹', ml: 'à´¤à´•àµà´•à´¾à´³à´¿', or: 'à¬Ÿà¬®à¬¾à¬Ÿà­‹', pa: 'à¨Ÿà¨®à¨¾à¨Ÿà¨°' } },
      { name: 'Onion', icon: 'ðŸ§…', type: 'Vegetable', translations: { en: 'Onion', hi: 'à¤ªà¥à¤¯à¤¾à¤œ', kn: 'à²ˆà²°à³à²³à³à²³à²¿', te: 'à°‰à°²à±à°²à°¿', ta: 'à®µà¯†à®™à¯à®•à®¾à®¯à®®à¯', mr: 'à¤•à¤¾à¤‚à¤¦à¤¾', gu: 'àª¡à«àª‚àª—àª³à«€', bn: 'à¦ªà§‡à¦à¦¯à¦¼à¦¾à¦œ', ml: 'à´‰à´³àµà´³à´¿', or: 'à¬ªà¬¿à¬†à¬œ', pa: 'à¨ªà¨¿à¨†à¨œà¨¼' } },
      { name: 'Potato', icon: 'ðŸ¥”', type: 'Vegetable', translations: { en: 'Potato', hi: 'à¤†à¤²à¥‚', kn: 'à²†à²²à³‚à²—à²¡à³à²¡à³†', te: 'à°¬à°‚à°—à°¾à°³à°¾à°¦à±à°‚à°ª', ta: 'à®‰à®°à¯à®³à¯ˆà®•à¯à®•à®¿à®´à®™à¯à®•à¯', mr: 'à¤¬à¤Ÿà¤¾à¤Ÿà¤¾', gu: 'àª¬àªŸàª¾àªŸàª¾', bn: 'à¦†à¦²à§', ml: 'à´‰à´°àµà´³à´•àµà´•à´¿à´´à´™àµà´™àµ', or: 'à¬†à¬³à­', pa: 'à¨†à¨²à©‚' } },
      { name: 'Chilli', icon: 'ðŸŒ¶ï¸', type: 'Vegetable', translations: { en: 'Chilli', hi: 'à¤®à¤¿à¤°à¥à¤š', kn: 'à²®à³†à²£à²¸à²¿à²¨à²•à²¾à²¯à²¿', te: 'à°®à°¿à°°à°ªà°•à°¾à°¯', ta: 'à®®à®¿à®³à®•à®¾à®¯à¯', mr: 'à¤®à¤¿à¤°à¤šà¥€', gu: 'àª®àª°àªšàª¾àª‚', bn: 'à¦²à¦™à§à¦•à¦¾', ml: 'à´®àµà´³à´•àµ', or: 'à¬²à¬™à­à¬•à¬¾', pa: 'à¨®à¨¿à¨°à¨š' } },
      { name: 'Brinjal (Eggplant)', icon: 'ðŸ†', type: 'Vegetable', translations: { en: 'Brinjal (Eggplant)', hi: 'à¤¬à¥ˆà¤‚à¤—à¤¨', kn: 'à²¬à²¦à²¨à³†', te: 'à°µà°‚à°•à°¾à°¯', ta: 'à®•à®¤à¯à®¤à®°à®¿à®•à¯à®•à®¾à®¯à¯', mr: 'à¤µà¤¾à¤‚à¤—à¥€', gu: 'àª°à«€àª‚àª—àª£', bn: 'à¦¬à§‡à¦—à§à¦¨', ml: 'à´µà´´àµà´¤à´¨', or: 'à¬¬à¬¾à¬‡à¬—à¬£', pa: 'à¨¬à©ˆà¨‚à¨—à¨£' } },
      { name: 'Okra (Lady Finger)', icon: 'ðŸ¥¬', type: 'Vegetable', translations: { en: 'Okra (Lady Finger)', hi: 'à¤­à¤¿à¤‚à¤¡à¥€', kn: 'à²¬à³†à²‚à²¡à³†', te: 'à°¬à±†à°‚à°¡à°•à°¾à°¯', ta: 'à®µà¯†à®£à¯à®Ÿà¯ˆà®•à¯à®•à®¾à®¯à¯', mr: 'à¤­à¥‡à¤‚à¤¡à¥€', gu: 'àª­à«€àª‚àª¡àª¾', bn: 'à¦¢à§‡à¦à¦¡à¦¼à¦¶', ml: 'à´µàµ†à´£àµà´Ÿ', or: 'à¬­à­‡à¬£à­à¬¡à¬¿', pa: 'à¨­à¨¿à©°à¨¡à©€' } },
      { name: 'Cucumber', icon: 'ðŸ¥’', type: 'Vegetable', translations: { en: 'Cucumber', hi: 'à¤–à¥€à¤°à¤¾', kn: 'à²¸à³Œà²¤à³†à²•à²¾à²¯à²¿', te: 'à°¦à±‹à°¸à°•à°¾à°¯', ta: 'à®µà¯†à®³à¯à®³à®°à®¿à®•à¯à®•à®¾à®¯à¯', mr: 'à¤•à¤¾à¤•à¤¡à¥€', gu: 'àª•àª¾àª•àª¡à«€', bn: 'à¦¶à¦¸à¦¾', ml: 'à´µàµ†à´³àµà´³à´°à´¿', or: 'à¬•à¬¾à¬•à­à¬¡à¬¿', pa: 'à¨–à©€à¨°à¨¾' } },
      { name: 'Mango', icon: 'ðŸ¥­', type: 'Fruit', translations: { en: 'Mango', hi: 'à¤†à¤®', kn: 'à²®à²¾à²µà³', te: 'à°®à°¾à°®à°¿à°¡à°¿', ta: 'à®®à®¾à®®à¯à®ªà®´à®®à¯', mr: 'à¤†à¤‚à¤¬à¤¾', gu: 'àª•à«‡àª°à«€', bn: 'à¦†à¦®', ml: 'à´®à´¾à´™àµà´™', or: 'à¬†à¬®à­à¬¬', pa: 'à¨†à¨®' } },
      { name: 'Banana', icon: 'ðŸŒ', type: 'Fruit', translations: { en: 'Banana', hi: 'à¤•à¥‡à¤²à¤¾', kn: 'à²¬à²¾à²³à³†', te: 'à°…à°°à°Ÿà°¿', ta: 'à®µà®¾à®´à¯ˆà®ªà¯à®ªà®´à®®à¯', mr: 'à¤•à¥‡à¤³à¥€', gu: 'àª•à«‡àª³àª¾', bn: 'à¦•à¦²à¦¾', ml: 'à´µà´¾à´´à´ªàµà´ªà´´à´‚', or: 'à¬•à¬¦à¬³à­€', pa: 'à¨•à©‡à¨²à¨¾' } },
      { name: 'Sapota (Chikoo)', icon: 'ðŸ‘', type: 'Fruit', translations: { en: 'Sapota (Chikoo)', hi: 'à¤šà¥€à¤•à¥‚', kn: 'à²¸à²ªà³‹à²Ÿ', te: 'à°¸à°ªà±‹à°Ÿ', ta: 'à®šà®ªà¯à®ªà¯‹à®Ÿà¯à®Ÿà®¾', mr: 'à¤šà¤¿à¤•à¥‚', gu: 'àªšà«€àª•à«', bn: 'à¦¸à¦«à§‡à¦¦à¦¾', ml: 'à´šà´¿à´•àµà´•àµ', or: 'à¬šà¬¿à¬•à­', pa: 'à¨šà©€à¨•à©‚' } },
      { name: 'Pomegranate', icon: 'ðŸŽ', type: 'Fruit', translations: { en: 'Pomegranate', hi: 'à¤…à¤¨à¤¾à¤°', kn: 'à²¦à²¾à²³à²¿à²‚à²¬à³†', te: 'à°¦à°¾à°¨à°¿à°®à±à°®', ta: 'à®®à®¾à®¤à¯à®³à¯ˆ', mr: 'à¤¡à¤¾à¤³à¤¿à¤‚à¤¬', gu: 'àª¦àª¾àª¡àª®', bn: 'à¦¡à¦¾à¦²à¦¿à¦®', ml: 'à´®à´¾à´¤à´³à´¨à´¾à´°à´™àµà´™', or: 'à¬¡à¬¾à¬³à¬¿à¬®à­à¬¬', pa: 'à¨…à¨¨à¨¾à¨°' } },
      { name: 'Coconut', icon: 'ðŸ¥¥', type: 'Fruit', translations: { en: 'Coconut', hi: 'à¤¨à¤¾à¤°à¤¿à¤¯à¤²', kn: 'à²¤à³†à²‚à²—à²¿à²¨à²•à²¾à²¯à²¿', te: 'à°•à±Šà°¬à±à°¬à°°à°¿', ta: 'à®¤à¯‡à®™à¯à®•à®¾à®¯à¯', mr: 'à¤¨à¤¾à¤°à¤³', gu: 'àª¨àª¾àª³àª¿àª¯à«‡àª°', bn: 'à¦¨à¦¾à¦°à¦•à§‡à¦²', ml: 'à´¤àµ‡à´™àµà´™', or: 'à¬¨à¬¡à¬¿à¬†', pa: 'à¨¨à¨¾à¨°à©€à¨…à¨²' } },
      { name: 'Coffee', icon: 'â˜•', type: 'Plantation', translations: { en: 'Coffee', hi: 'à¤•à¥‰à¤«à¥€', kn: 'à²•à²¾à²«à²¿', te: 'à°•à°¾à°«à±€', ta: 'à®•à®¾à®ªà®¿', mr: 'à¤•à¥‰à¤«à¥€', gu: 'àª•à«‹àª«à«€', bn: 'à¦•à¦«à¦¿', ml: 'à´•à´¾à´ªàµà´ªà´¿', or: 'à¬•à¬«à¬¿', pa: 'à¨•à©Œà¨«à©€' } },
      { name: 'Sugarcane', icon: 'ðŸŒ¾', type: 'Cash Crop', translations: { en: 'Sugarcane', hi: 'à¤—à¤¨à¥à¤¨à¤¾', kn: 'à²•à²¬à³à²¬à³', te: 'à°šà±†à°°à°•à±', ta: 'à®•à®°à¯à®®à¯à®ªà¯', mr: 'à¤Šà¤¸', gu: 'àª—àª³àªšà«€', bn: 'à¦†à¦–', ml: 'à´•à´°à´¿à´®àµà´ªàµ', or: 'à¬…à¬–à­', pa: 'à¨—à©°à¨¨à¨¾' } },
      { name: 'Cotton', icon: 'ðŸŒ¿', type: 'Cash Crop', translations: { en: 'Cotton', hi: 'à¤•à¤ªà¤¾à¤¸', kn: 'à²¹à²¤à³à²¤à²¿', te: 'à°ªà°¤à±à°¤à°¿', ta: 'à®ªà®°à¯à®¤à¯à®¤à®¿', mr: 'à¤•à¤¾à¤ªà¥‚à¤¸', gu: 'àª•àªªàª¾àª¸', bn: 'à¦¤à§à¦²à¦¾', ml: 'à´ªà´°àµà´¤àµà´¤à´¿', or: 'à¬•à¬ªà¬¾à¬¸', pa: 'à¨•à¨ªà¨¾à¨¹' } },
      { name: 'Turmeric', icon: 'ðŸŸ¡', type: 'Spice', translations: { en: 'Turmeric', hi: 'à¤¹à¤²à¥à¤¦à¥€', kn: 'à²…à²°à²¿à²¶à²¿à²¨', te: 'à°ªà°¸à±à°ªà±', ta: 'à®®à®žà¯à®šà®³à¯', mr: 'à¤¹à¤³à¤¦', gu: 'àª¹àª³àª¦àª°', bn: 'à¦¹à¦²à§à¦¦', ml: 'à´®à´žàµà´žàµ¾', or: 'à¬¹à¬³à¬¦à­€', pa: 'à¨¹à¨²à¨¦à©€' } }
    ];
    
    let selectedCrops = [];
    const selectedLang = localStorage.getItem('selectedLanguage') || 'en';

    function renderCrops() {
      const grid = document.getElementById('cropsGrid');
      if (!grid) {
        console.error('Crops grid not found!');
        return;
      }
      grid.innerHTML = '';
      
      // Get crop name in selected language
      const getCropName = (crop) => {
        return crop.translations && crop.translations[selectedLang] ? crop.translations[selectedLang] : crop.name;
      };
      
      crops.forEach((crop, index) => {
        const option = document.createElement('div');
        option.className = 'crop-option';
        option.onclick = function() {
          toggleCrop(crop.name, index);
        };
        const cropName = getCropName(crop);
        option.innerHTML = `
          <div class="crop-icon">${crop.icon}</div>
          <div class="crop-name">${cropName}</div>
          <div class="crop-type">${crop.type}</div>
        `;
        grid.appendChild(option);
      });
      
      // Restore selected crops
      const savedCrops = JSON.parse(localStorage.getItem('selectedCrops') || '[]');
      if (savedCrops.length > 0) {
        selectedCrops = savedCrops;
        updateUI();
        const btn = document.getElementById('continueBtn');
        if (btn) btn.disabled = false;
      }
      
      // Update page text based on language
      const t = window.translations && window.translations[selectedLang] ? window.translations[selectedLang] : {};
      const titleEl = document.getElementById('cropTitle');
      const subtitleEl = document.getElementById('cropSubtitle');
      const hintEl = document.getElementById('cropHint');
      
      if (titleEl) titleEl.textContent = t.selectPlantType || 'ðŸŒ¾ Select Your Crop Types';
      if (subtitleEl) subtitleEl.textContent = t.selectPlantTypeDesc || 'Choose one or more crops you want to monitor (Karnataka-grown crops)';
      if (hintEl) hintEl.textContent = 'You can select multiple crops';
    }

    function toggleCrop(cropName, index) {
      const cropIndex = selectedCrops.indexOf(cropName);
      
      if (cropIndex > -1) {
        // Deselect
        selectedCrops.splice(cropIndex, 1);
      } else {
        // Select
        selectedCrops.push(cropName);
      }
      
      updateUI();
      
      // Enable/disable continue button
      document.getElementById('continueBtn').disabled = selectedCrops.length === 0;
      
      // Store selection
      localStorage.setItem('selectedCrops', JSON.stringify(selectedCrops));
    }

    function updateUI() {
      const options = document.querySelectorAll('.crop-option');
      options.forEach((opt, index) => {
        if (selectedCrops.includes(crops[index].name)) {
          opt.classList.add('selected');
        } else {
          opt.classList.remove('selected');
        }
      });
      
      // Update button text
      const btn = document.getElementById('continueBtn');
      if (selectedCrops.length > 0) {
        btn.textContent = `Continue (${selectedCrops.length} selected)`;
      } else {
        btn.textContent = 'Continue (0 selected)';
      }
    }

    function continueToHome() {
      if (selectedCrops.length > 0) {
        localStorage.setItem('selectedCrops', JSON.stringify(selectedCrops));
        window.location.href = 'home.html';
      }
    }

    // Wait for DOM and translations to be ready
    function initCropSelection() {
      // Make sure translations are loaded
      if (typeof translations !== 'undefined') {
        window.translations = translations;
      }
      renderCrops();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initCropSelection);
    } else {
      // Small delay to ensure translations.js has loaded
      setTimeout(initCropSelection, 100);
    }
  </script>
</body>
</html>

